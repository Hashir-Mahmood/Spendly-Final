<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="MauiApp1234.Budgeting"
             BackgroundColor="#f4f6f9"
             NavigationPage.HasNavigationBar="False"
             Shell.NavBarIsVisible="False">

    <Grid RowDefinitions="Auto,Auto,*,Auto">
        <Grid Grid.Row="0" Margin="20,10" ColumnDefinitions="Auto,*,Auto,Auto">
            <Frame Grid.Column="0" CornerRadius="24" Padding="10" HasShadow="False" BackgroundColor="White" HorizontalOptions="CenterAndExpand">
                <Image Source="ai.png" HeightRequest="20" WidthRequest="20" x:Name="ChatbotIcon"/>
                <Frame.GestureRecognizers>
                    <TapGestureRecognizer Tapped="ChatbotIcon_Tapped"/>
                </Frame.GestureRecognizers>
            </Frame>

            <Grid Grid.Column="1" />

            <Frame Grid.Column="2" CornerRadius="24" Padding="10" HasShadow="False" BackgroundColor="White" >
                <Image Source="bell.png" HeightRequest="20" WidthRequest="20" x:Name="NotificationsIcon"/>
                <Frame.GestureRecognizers>
                    <TapGestureRecognizer Tapped="OnNotificationsIconTapped"/>
                </Frame.GestureRecognizers>
            </Frame>

            <Frame Grid.Column="3" CornerRadius="20" Padding="10" HasShadow="False" BackgroundColor="White" Margin="10,0,0,0">
                <Image Source="settings.png" HeightRequest="20" WidthRequest="20" x:Name="SettingsIcon"/>
                <Frame.GestureRecognizers>
                    <TapGestureRecognizer Tapped="SettingsIcon_Tapped"/>
                </Frame.GestureRecognizers>
            </Frame>
        </Grid>

        <Label Grid.Row="1" Text="Budgeting" FontSize="22" FontAttributes="Bold"
               HorizontalOptions="Center" Margin="20,5,20,15" />

        <ScrollView Grid.Row="2">
            <VerticalStackLayout Spacing="15" Padding="20,0,20,20">
                <Frame CornerRadius="15" Padding="15" HasShadow="False" BackgroundColor="White">
                    <VerticalStackLayout Spacing="15">
                        <Grid ColumnDefinitions="*,Auto">
                            <StackLayout Grid.Column="0" Orientation="Vertical" Spacing="5">
                                <Label Text="Budget Streak" TextColor="#6366f1" FontSize="18" FontAttributes="Bold" />
                                <Label Text="Keep it going!" TextColor="#6b7280" FontSize="14" />
                            </StackLayout>
                            <StackLayout Grid.Column="1" Orientation="Horizontal" HorizontalOptions="End">
                                <Label x:Name="IconLabel" Text="ðŸ”¥ " FontSize="57" VerticalOptions="Center" />
                                <Label Text="42" FontSize="57" TextColor="#6366f1" FontAttributes="Bold" VerticalOptions="Center" x:Name="StreakNumberLabel"/>
                            </StackLayout>
                        </Grid>
                        <Grid ColumnDefinitions="*,*,*,*,*,*,*" ColumnSpacing="5" x:Name="StreakProgressGrid">
                            <BoxView Grid.Column="0" HeightRequest="6" CornerRadius="3" BackgroundColor="#10b981" />
                            <BoxView Grid.Column="1" HeightRequest="6" CornerRadius="3" BackgroundColor="#10b981" />
                            <BoxView Grid.Column="2" HeightRequest="6" CornerRadius="3" BackgroundColor="#10b981" />
                            <BoxView Grid.Column="3" HeightRequest="6" CornerRadius="3" BackgroundColor="#10b981" />
                            <BoxView Grid.Column="4" HeightRequest="6" CornerRadius="3" BackgroundColor="#d1d5db" />
                            <BoxView Grid.Column="5" HeightRequest="6" CornerRadius="3" BackgroundColor="#d1d5db" />
                            <BoxView Grid.Column="6" HeightRequest="6" CornerRadius="3" BackgroundColor="#d1d5db" />
                        </Grid>
                        <HorizontalStackLayout Spacing="10">
                            <Button Text="Subscription" BackgroundColor="#6366f1" TextColor="White" CornerRadius="20" HeightRequest="40" WidthRequest="140" Clicked="SubscriptionButton_Clicked" />
                            <Button Text="Freeze Streak" BackgroundColor="#a5f3fc" TextColor="#0891b2" CornerRadius="20" HeightRequest="40" WidthRequest="140" Clicked="FreezeStreakButton_Clicked" />
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </Frame>

                <Frame CornerRadius="15" Padding="15" HasShadow="False" BackgroundColor="White">
                    <VerticalStackLayout Spacing="10">
                        <Label Text="Monthly Budget" FontSize="18" FontAttributes="Bold" HorizontalOptions="Center" />
                        <Grid ColumnDefinitions="*,Auto">
                            <Label Grid.Column="0" Text="Remaining: Â£0" TextColor="#10b981" x:Name="MonthlyBudgetRemainingLabel"/>
                            <Label Grid.Column="1" Text="Â£0" TextColor="#6b7280" x:Name="MonthlyBudgetTotalLabel"/>
                        </Grid>
                        <Grid HeightRequest="20">
                            <Frame Padding="0" CornerRadius="5" HasShadow="False" HeightRequest="20" BackgroundColor="#f3f4f6">
                                <BoxView HeightRequest="20" WidthRequest="0" HorizontalOptions="Start" BackgroundColor="#6366f1" x:Name="MonthlyBudgetProgressBar"/>
                            </Frame>
                            <Label Text="0%" TextColor="#6366f1" FontAttributes="Bold" VerticalOptions="Center"
                                   HorizontalOptions="Start" Margin="5,0,0,0" x:Name="MonthlyBudgetProgressLabel"/>
                        </Grid>
                    </VerticalStackLayout>
                </Frame>

                <Label Text="Spending Categories (Dec 2024)" FontSize="18" FontAttributes="Bold" Margin="0,10,0,5" />
                <Frame CornerRadius="15" Padding="10" HasShadow="False" BackgroundColor="#f9fafb">
                    <VerticalStackLayout x:Name="SpendingCategoriesContainer" Spacing="8">
                        <Label Text="Loading categories..." TextColor="Gray" HorizontalOptions="Center" Padding="20"/>
                    </VerticalStackLayout>
                </Frame>
            </VerticalStackLayout>
        </ScrollView>

        <Grid Grid.Row="3" BackgroundColor="White" HeightRequest="60" ColumnDefinitions="*,*,*,*">
            <Image Grid.Column="0" Source="home_grey.png" HeightRequest="24" HorizontalOptions="Center" VerticalOptions="Center" x:Name="home">
                <Image.GestureRecognizers>
                    <TapGestureRecognizer Tapped="home_Tapped"></TapGestureRecognizer>
                </Image.GestureRecognizers>
            </Image>
            <Image Grid.Column="1" Source="budget_purple.png" HeightRequest="24" HorizontalOptions="Center" VerticalOptions="Center" x:Name="budget">
                <Image.GestureRecognizers>
                    <TapGestureRecognizer Tapped="budget_Tapped"/>
                </Image.GestureRecognizers>
            </Image>
            <Image Grid.Column="2" Source="investment_grey.png" HeightRequest="24" HorizontalOptions="Center" VerticalOptions="Center" x:Name="investment">
                <Image.GestureRecognizers>
                    <TapGestureRecognizer Tapped="investment_Tapped"/>
                </Image.GestureRecognizers>
            </Image>
            <Image Grid.Column="3" Source="infohub_grey.png" HeightRequest="24" HorizontalOptions="Center" VerticalOptions="Center" x:Name="infohub">
                <Image.GestureRecognizers>
                    <TapGestureRecognizer Tapped="infohub_Tapped"/>
                </Image.GestureRecognizers>
            </Image>
        </Grid>
    </Grid>

</ContentPage>
